/*! Help & Manual WebHelp 3 Script functions
Copyright (c) 2015-2019 by Tim Green. All rights reserved. Contact tg@it-authoring.com
*/
;var HMImageToggle=function(i){var a,u=false,k=i.attr("id"),w=i.attr("data-src0"),v=i.attr("data-src1"),b=i.attr("data-state"),m=i.attr("data-title0")?i.attr("data-title0"):null,l=i.attr("data-title1")?i.attr("data-title1"):null,p=i.attr("data-caption0")?i.attr("data-caption0"):null,n=i.attr("data-caption1")?i.attr("data-caption1"):null,e=p?i.parents("div")[0]:null,o=i.offset().left,f=i.offset().top,s={},x={},h={},q,t=0,j=new Image();h.w=$(window).width()-30;h.h=$(window).height()-30;s.w=i.width();s.h=i.height();q=h.h;hFactor=s.h/s.w;if(!n){$("body").append('<div id="imagetogglebox"></div>');}else{$("body").append('<div id="imagetogglebox"><div id="imagecaptionbox"><p class="zoomedcaption">'+n+"</p></div></div>");u=$("div#imagecaptionbox");}a=$("div#imagetogglebox");$(j).css({width:"100%",height:"auto"});function g(y){$(document).on(hmBrowser.touchstart+".closemenu",function(z){if(!y.contains(z.target)){d();$(document).off(hmBrowser.touchstart+".closemenu");}});}function d(z,y){var A=(typeof y=="undefined")?"fast":y;a.animate({width:s.w,height:s.h,top:f,left:o},A,function(){a.hide();a.remove();i.attr("data-state","0");if(typeof hmxtoggle=="undefined"){$("body,html").css("overflow","hidden");}});}hmWebHelp.funcs.closeImageToggle=d;function c(y){y.stopPropagation();if(a.width()<x.w){if(x.w>$(window).width()||x.h>$(window).height()){$("body,html").css("overflow","auto");}if(u){u.hide();}a.animate({top:0,left:0,width:x.w,height:x.h},"fast",function(){a.css("position","absolute");$("div#imagezoom").hide();});}else{d();}}function r(z,y){while(z.w>y.w||z.h>y.h){z.w-=5;z.h=z.w*hFactor;}return z;}j.onload=function(){var C={},z,B,A=0,y=0;x.w=C.w=j.width;x.h=C.h=j.height;C=r(C,h);a.append(j);a.append('<div id="imagezoom"><img id="imagezoomer" src="./images/ZoomIn.png" border="0"/></div>');g(a[0]);a.css({left:o+"px",top:f+"px",width:s.w+"px",height:s.h+"px"});a.show();t=parseFloat(getComputedStyle(a[0]).getPropertyValue("border-top-width"),10);if(u){u.css({width:C.w+"px"});while(C.h>q-(u.height()+10)){C.w-=5;C.h=C.w*hFactor;}y=u.outerHeight();u.css({width:""});}z=($(window).height()-(C.h+t*2))/2;B=($(window).width()-(C.w+t*2))/2;if(u){z=5;A=y+t*2;}if(x.w>C.w){$("div#imagezoom").on("click",c).show();}a.animate({width:C.w,height:C.h+A,top:z,left:B},"fast",function(){i.attr("data-state","1");if(u){var D=$(j).height()+u.outerHeight();a.css("height",D+"px");}});};j.src=v;};hmWebHelp.funcs.hmImageToggle=HMImageToggle;
